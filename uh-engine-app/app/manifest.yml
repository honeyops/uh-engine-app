# For more information on creating manifest, go to https://docs.snowflake.com/en/developer-guide/native-apps/creating-manifest
manifest_version: 1

version:
  name: Dev
  label: "Dev Version"
  comment: "Default version used for development. Override for actual deployment."

configuration:
  log_level: INFO
  trace_level: ALWAYS
  grant_callback: setup.create_service

artifacts:
  readme: README.md

  default_web_endpoint:
    service: services.uh_engine_app_service
    endpoint: my-endpoint

  setup_script: setup.sql

  container_services:
    images:
      - /uh_engine_app_database/public/images/uh_engine_app_service:latest

privileges:
  - CREATE COMPUTE POOL:
      required_at_setup: true
      description: "The Unified Honey application requires permission to create compute pools"
  - BIND SERVICE ENDPOINT:
      required_at_setup: true
      description: "The Unified Honey application requires permission to create endpoints in services"
  - CREATE DATABASE:
      required_at_setup: true
      description: "The Unified Honey application requires permission to create the UNIFIED_HONEY database in the customer account"

references:
  - consumer_warehouse:
      label: "Application Warehouse"
      description: "A warehouse in the consumer account for executing queries and running the application service"
      privileges:
        - USAGE
        - OPERATE
      object_type: WAREHOUSE
      multi_valued: false
      register_callback: config.register_warehouse
  - source_databases:
      label: "Source Databases"
      description: "One or more databases in the consumer account to read data from"
      privileges:
        - USAGE
        - REFERENCE_USAGE
      object_type: DATABASE
      multi_valued: true
      register_callback: config.register_databases